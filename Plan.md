# Development Plan

## プロダクション品質への昇華 - 2026-02-11

### 目的 (Objective)

DeepForm をプロダクションレディな品質に引き上げる。テスト、デザイン、品質に特に注力する。

### 現状分析 (Current State)

- **テスト**: ゼロ。テストフレームワーク未導入
- **lint (コード)**: 未導入
- **build スクリプト**: なし
- **入力バリデーション**: サーバーサイドバリデーションなし
- **フロントエンド**: Vanilla JS SPA、型安全性なし
- **アクセシビリティ**: 未考慮
- **エラーハンドリング**: console.error のみ
- **レート制限**: なし
- **既知バグ**: `appendChatBubble` 未定義関数の呼び出し

### チーム構成

| 役割 | 担当領域 |
|------|----------|
| PO | バックログ優先順位、受け入れ基準定義 |
| Developer | テスト基盤、バグ修正、コード品質、バリデーション |
| Designer | UI/UX 改善、アクセシビリティ、レスポンシブ |
| QA | テスト作成、バグ発見、品質保証 |
| Tech Writer | ドキュメント改善、API ドキュメント |
| User | ユーザビリティ検証、UX フィードバック |

### フェーズ 1: 基盤整備 (Infrastructure)

- [x] テストフレームワーク導入 (Vitest)
- [x] ESLint / Biome 導入
- [x] build スクリプト追加
- [x] package.json スクリプト整備

### フェーズ 2: 品質改善 (Quality)

- [x] Zod によるサーバーサイドバリデーション追加
- [x] 既知バグ修正 (appendChatBubble 等)
- [x] エラーハンドリング改善
- [x] セキュリティ強化 (SESSION_SECRET 検証、トークンエントロピー改善、LLM タイムアウト)

### フェーズ 3: テスト (Testing)

- [x] バックエンド API ユニットテスト
- [x] ミドルウェアテスト
- [x] LLM モジュールテスト
- [ ] フロントエンド E2E テスト

### フェーズ 4: デザイン (Design)

- [x] アクセシビリティ改善 (ARIA、キーボードナビゲーション)
- [x] ダークモード対応
- [x] モバイルレスポンシブ改善
- [x] ローディング/エラー状態の UX 改善

### フェーズ 5: ドキュメント (Documentation)

- [x] API ドキュメント
- [x] 開発者向けセットアップガイド
- [x] アーキテクチャ図

### 進捗ログ (Progress Log)

- [2026-02-11] 現状分析完了、チーム編成開始
- [2026-02-11] フェーズ 1-5 実装完了 (E2E テスト除く)。62 テスト合格、lint/typecheck 通過
- [2026-02-11] CodeRabbit レビュー対応: セキュリティ強化、i18n 修正、エラーハンドリング改善

- [2026-02-11] ポリッシュラウンド 2 完了:
  - ダークモード切替、ポリシーモーダル、README.ja.md
  - セッション数制限（MAX_SESSIONS_PER_USER=50、429 エラー）
  - BDD テスト 103 件（全エンドポイント網羅）
  - Makefile を bun → npm/npx に移行
  - biome format 適用
