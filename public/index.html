<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DeepForm — AIデプスインタビューから実装仕様まで</title>
  <meta name="description" content="ふわっとした課題を入力するだけ。AIがデプスインタビューを実施し、ファクト抽出・仮説生成・PRD・実装仕様まで自動生成。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Noto+Sans+JP:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <a href="/" class="logo" onclick="showHome(); return false;">
          <svg class="logo-mark" width="28" height="28" viewBox="0 0 28 28" fill="none">
            <rect width="28" height="28" rx="6" fill="#81a2be"/>
            <path d="M8 9h5l3 5-3 5H8l3-5-3-5z" fill="#fff" opacity="0.9"/>
            <path d="M15 9h5l-3 5 3 5h-5l-3-5 3-5z" fill="#fff" opacity="0.6"/>
          </svg>
          DeepForm
        </a>
        <nav class="header-nav">
          <div class="lang-switcher">
            <button class="lang-btn" data-lang="ja" onclick="setLang('ja')">JA</button>
            <button class="lang-btn" data-lang="en" onclick="setLang('en')">EN</button>
            <button class="lang-btn" data-lang="es" onclick="setLang('es')">ES</button>
          </div>
          <a href="#how-it-works" class="nav-link" data-i18n="nav.howItWorks" onclick="document.getElementById('how-it-works')?.scrollIntoView({behavior:'smooth'}); return false;">How it works</a>
          <button class="btn btn-sm btn-primary" data-i18n="nav.start" onclick="document.getElementById('theme-input')?.focus(); document.getElementById('page-home')?.classList.add('active'); window.scrollTo({top:0,behavior:'smooth'});">始める</button>
        </nav>
      </div>
    </header>

    <main id="main-content">
      <!-- ========== HOME / LANDING ========== -->
      <section id="page-home" class="page active">

        <!-- Hero -->
        <div class="hero">
          <div class="hero-glow"></div>
          <div class="hero-badge" data-i18n="hero.badge">AI-Powered Depth Interview</div>
          <h1><span data-i18n="hero.title1">PoCで止まらない。</span><br><span class="gradient-text" data-i18n="hero.title2">リリースできる仕様まで、一直線。</span></h1>
          <p class="hero-sub" data-i18n="hero.sub">
            AIがあればPoCは作れる。でも、その先がない。<br>
            エッジケース、非機能要件、受け入れ基準——<br>
            サービスにするために必要なことを、AIがインタビューから全部引き出します。
          </p>
          <div class="theme-input-area">
            <textarea id="theme-input" data-i18n="hero.placeholder" placeholder="例：研究室の週末オペを楽にしたい…" rows="2"></textarea>
            <button id="btn-start" class="btn btn-primary btn-lg" onclick="startNewSession()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
              <span data-i18n="hero.cta">インタビューを開始</span>
            </button>
          </div>
        </div>

        <!-- Problem + What is Depth Interview -->
        <div class="section" id="problem">
          <div class="problem-grid">
            <div class="problem-card">
              <h3 data-i18n="problem.title">PoCは作れる。でも、その先がない。</h3>
              <p data-i18n="problem.desc">
                AIの発達で、思いつきを動くものにするまでは速くなった。<br>
                でも現実には、PoCで止まるプロジェクトがほとんど。
              </p>
              <ul class="problem-list">
                <li data-i18n="problem.item1">「どんなエッジケースがあるか」がわからない</li>
                <li data-i18n="problem.item2">「セキュリティや可用性をどこまでやるか」が決められない</li>
                <li data-i18n="problem.item3">「これで実装して」と渡せる仕様書が書けない</li>
                <li data-i18n="problem.item4">そもそもユーザーが本当に困っているか検証できていない</li>
              </ul>
              <p class="problem-conclusion" data-i18n="problem.conclusion">
                エンジニアでない人には「何が足りないか」すら見えない。<br>
                DeepFormは、そのギャップを埋める。
              </p>
            </div>
            <div class="problem-card accent">
              <h3 data-i18n="depth.title">デプスインタビューとは</h3>
              <p data-i18n="depth.desc">
                表面的なアンケートではなく、「なぜそう思うのか」「具体的にいつ困ったのか」を
                1対1の対話で深掘りする調査手法。
              </p>
              <div class="depth-comparison">
                <div class="comparison-item bad">
                  <div class="comparison-label" data-i18n="depth.bad.label">普通のアンケート</div>
                  <p data-i18n="depth.bad.text">「この機能は便利ですか？」 → Yes / No</p>
                </div>
                <div class="comparison-item good">
                  <div class="comparison-label" data-i18n="depth.good.label">デプスインタビュー</div>
                  <p data-i18n="depth.good.text">「最近それで困った具体的な場面は？」「そのときどうやって切り抜けた？」</p>
                </div>
              </div>
              <p data-i18n="depth.conclusion">
                これにより、「あったらいいな」ではなく「なければ困る」真の課題が見えてくる。<br>
                ただし本来は専門スキルが必要——DeepFormはAIがそれを代行する。
              </p>
            </div>
          </div>
        </div>

        <!-- Flow Steps -->
        <div class="section" id="how-it-works">
          <h2 class="section-title" data-i18n="howItWorks.title">How it works</h2>
          <p class="section-sub" data-i18n="howItWorks.sub">5つのステップで、課題テーマから実装可能な仕様を生成</p>
          <div class="flow-steps">
            <div class="flow-card">
              <div class="flow-num">01</div>
              <div class="flow-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/><path d="M19 10v2a7 7 0 01-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg></div>
              <h3 data-i18n="step1.title">AI デプスインタビュー</h3>
              <p data-i18n="step1.desc">熟練のインタビュアーAIが、具体例・頻度・困り度・回避策を深掘り</p>
            </div>
            <div class="flow-arrow">→</div>
            <div class="flow-card">
              <div class="flow-num">02</div>
              <div class="flow-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="12" width="4" height="9"/><rect x="10" y="6" width="4" height="15"/><rect x="17" y="3" width="4" height="18"/></svg></div>
              <h3 data-i18n="step2.title">ファクト抽出</h3>
              <p data-i18n="step2.desc">発話エビデンス付きで、事実・ペイン・頻度・回避策を構造化</p>
            </div>
            <div class="flow-arrow">→</div>
            <div class="flow-card">
              <div class="flow-num">03</div>
              <div class="flow-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 21h6M12 3a6 6 0 00-4 10.5V17h8v-3.5A6 6 0 0012 3z"/></svg></div>
              <h3 data-i18n="step3.title">仮説生成</h3>
              <p data-i18n="step3.desc">根拠リンク・反証パターン・未検証ポイント付きの仮説を自動生成</p>
            </div>
            <div class="flow-arrow">→</div>
            <div class="flow-card">
              <div class="flow-num">04</div>
              <div class="flow-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M16 4h2a2 2 0 012 2v14a2 2 0 01-2 2H6a2 2 0 01-2-2V6a2 2 0 012-2h2"/><rect x="8" y="2" width="8" height="4" rx="1"/><line x1="8" y1="10" x2="16" y2="10"/><line x1="8" y1="14" x2="16" y2="14"/><line x1="8" y1="18" x2="12" y2="18"/></svg></div>
              <h3 data-i18n="step4.title">PRD 生成</h3>
              <p data-i18n="step4.desc">MVPスコープに圧縮された、テスト可能な受け入れ基準付きPRD</p>
            </div>
            <div class="flow-arrow">→</div>
            <div class="flow-card">
              <div class="flow-num">05</div>
              <div class="flow-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg></div>
              <h3 data-i18n="step5.title">実装仕様エクスポート</h3>
              <p data-i18n="step5.desc">API仕様・DBスキーマ・テストケースを spec.json で出力</p>
            </div>
            <div class="flow-arrow">→</div>
            <div class="flow-card">
              <div class="flow-num">06</div>
              <div class="flow-icon"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></svg></div>
              <h3 data-i18n="step6.title">デプロイ & フィードバック</h3>
              <p data-i18n="step6.desc">AIがアプリを生成・公開。ユーザーの声を収集して次の改善に回す。</p>
            </div>
          </div>
        </div>

        <!-- Features -->
        <div class="section">
          <h2 class="section-title" data-i18n="features.title">差別化ポイント</h2>
          <div class="features-grid">
            <div class="feature-item">
              <div class="feature-icon-wrap">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
              </div>
              <h4 data-i18n="feat1.title">Evidence-linked 仕様</h4>
              <p data-i18n="feat1.desc">要件と元発話がリンク。「なぜこの機能？」に常に答えられる。</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrap">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              </div>
              <h4 data-i18n="feat2.title">反証付き仮説</h4>
              <p data-i18n="feat2.desc">思い込みを防止。各仮説に反証パターンと未検証ポイントを明示。</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrap">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" y1="9" x2="9.01" y2="9"/><line x1="15" y1="9" x2="15.01" y2="9"/></svg>
              </div>
              <h4 data-i18n="feat3.title">深掘り専用AI</h4>
              <p data-i18n="feat3.desc">具体例ベースで掘る専用ロジック。非エンジニアでもプロ級インタビュー。</p>
            </div>
            <div class="feature-item">
              <div class="feature-icon-wrap">
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
              </div>
              <h4 data-i18n="feat4.title">エージェント直投入</h4>
              <p data-i18n="feat4.desc">spec.json をコピーしてコーディングエージェントに貼るだけ。</p>
            </div>
          </div>
        </div>

        <!-- Past Sessions -->
        <div class="section">
          <h2 class="section-title" data-i18n="sessions.title">セッション一覧</h2>
          <div id="sessions-list" class="sessions-list">
            <p class="empty-state" data-i18n="sessions.empty">まだセッションがありません</p>
          </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
          <p data-i18n="footer.tagline">DeepForm — From vague idea → deployable spec.</p>
          <p class="footer-sub" data-i18n="footer.credit">Built with Claude AI × exe.dev</p>
        </footer>
      </section>

      <!-- ========== INTERVIEW PAGE ========== -->
      <section id="page-interview" class="page">
        <div class="interview-layout">
          <div class="interview-sidebar">
            <div class="step-nav">
              <div class="step active" data-step="interview">
                <span class="step-num">1</span>
                <span class="step-label" data-i18n="stepnav.interview">インタビュー</span>
              </div>
              <div class="step" data-step="facts">
                <span class="step-num">2</span>
                <span class="step-label" data-i18n="stepnav.facts">ファクト抽出</span>
              </div>
              <div class="step" data-step="hypotheses">
                <span class="step-num">3</span>
                <span class="step-label" data-i18n="stepnav.hypotheses">仮説生成</span>
              </div>
              <div class="step" data-step="prd">
                <span class="step-num">4</span>
                <span class="step-label" data-i18n="stepnav.prd">PRD</span>
              </div>
              <div class="step" data-step="spec">
                <span class="step-num">5</span>
                <span class="step-label" data-i18n="stepnav.spec">実装仕様</span>
              </div>
              <div class="step" data-step="deploy">
                <span class="step-num">6</span>
                <span class="step-label" data-i18n="stepnav.deploy">デプロイ</span>
              </div>
            </div>
            <div class="session-theme" id="session-theme"></div>
            <button class="btn btn-sm btn-secondary" style="width:100%;margin-top:12px" onclick="shareSession(currentSessionId)">
              <span data-i18n="sidebar.share">共有URLを発行</span>
            </button>
            <button class="btn btn-sm btn-accent" style="width:100%;margin-top:8px" onclick="createCampaign(currentSessionId)">
              <span data-i18n="sidebar.campaign">キャンペーンURLを発行</span>
            </button>
          </div>

          <div class="interview-main">
            <!-- Step: Interview -->
            <div id="step-interview" class="step-content active">
              <div class="step-header">
                <h2 data-i18n="interview.title">AI デプスインタビュー</h2>
                <p class="step-desc" data-i18n="interview.desc">課題について、AIが具体的なエピソードを深掘りします</p>
              </div>
              <div class="chat-container" id="chat-container"></div>
              <div class="chat-input-area">
                <textarea id="chat-input" data-i18n="interview.placeholder" placeholder="回答を入力…" rows="2"
                  onkeydown="handleChatKeydown(event)"></textarea>
                <button class="btn btn-primary" onclick="sendMessage()" id="btn-send">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                </button>
              </div>
              <div class="chat-hint" data-i18n="interview.hint">Shift + Enter で送信　・　Enter で改行</div>
              <div class="step-actions">
                <button class="btn btn-accent" onclick="runAnalysis()" id="btn-analyze" disabled>
                  <span data-i18n="interview.next">ファクト抽出に進む →</span>
                </button>
              </div>
            </div>

            <!-- Step: Facts -->
            <div id="step-facts" class="step-content">
              <div class="step-header">
                <h2 data-i18n="facts.title">抽出されたファクト</h2>
                <p class="step-desc" data-i18n="facts.desc">インタビューから抽出された事実・困りごと・頻度・回避策</p>
              </div>
              <div id="facts-container" class="cards-grid"></div>
              <div class="step-actions">
                <button class="btn btn-accent" onclick="runHypotheses()" id="btn-hypotheses">
                  <span data-i18n="facts.next">仮説生成に進む →</span>
                </button>
              </div>
            </div>

            <!-- Step: Hypotheses -->
            <div id="step-hypotheses" class="step-content">
              <div class="step-header">
                <h2 data-i18n="hypotheses.title">仮説（反証付き）</h2>
                <p class="step-desc" data-i18n="hypotheses.desc">ファクトに基づく仮説と、それが成り立たない可能性</p>
              </div>
              <div id="hypotheses-container"></div>
              <div class="step-actions">
                <button class="btn btn-accent" onclick="runPRD()" id="btn-prd">
                  <span data-i18n="hypotheses.next">PRD生成に進む →</span>
                </button>
              </div>
            </div>

            <!-- Step: PRD -->
            <div id="step-prd" class="step-content">
              <div class="step-header">
                <h2 data-i18n="prd.title">PRD（プロダクト要件定義書）</h2>
                <p class="step-desc" data-i18n="prd.desc">MVPスコープに圧縮された、テスト可能な受け入れ基準付きのPRD</p>
              </div>
              <div id="prd-container"></div>
              <div class="step-actions">
                <button class="btn btn-accent" onclick="runSpec()" id="btn-spec">
                  <span data-i18n="prd.next">実装仕様を生成 →</span>
                </button>
              </div>
            </div>

            <!-- Step: Spec -->
            <div id="step-spec" class="step-content">
              <div class="step-header">
                <h2 data-i18n="spec.title">実装仕様</h2>
                <p class="step-desc" data-i18n="spec.desc">コーディングエージェントにそのまま渡せる実装仕様</p>
              </div>
              <div id="spec-container"></div>
              <div class="export-actions">
                <button class="btn btn-primary btn-lg" onclick="exportSpecJSON()">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                  <span data-i18n="spec.exportJson">spec.json をコピー</span>
                </button>
                <button class="btn btn-secondary btn-lg" onclick="exportPRDMarkdown()">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                  <span data-i18n="spec.exportMd">PRD.md をコピー</span>
                </button>
              </div>

              <div class="step-actions">
                <button class="btn btn-accent" onclick="generateAndDeploy()" id="btn-deploy">
                  <span data-i18n="spec.deploy">アプリを生成・デプロイ →</span>
                </button>
              </div>

              <!-- Next Steps (manual export) -->
              <details class="next-steps-details" style="margin-top:24px">
                <summary data-i18n="next.summary" style="cursor:pointer;color:var(--text-dim);font-size:13px">手動でエクスポートして外部ツールで実装する場合</summary>
                <div class="next-steps" style="margin-top:12px">
                <h3 data-i18n="next.title">コーディングエージェントで実装</h3>
                <div class="next-steps-grid">
                  <a href="https://exe.dev" target="_blank" rel="noopener" class="next-step-card">
                    <div class="next-step-header">
                      <div class="next-step-icon">exe</div>
                      <div class="next-step-badge" data-i18n="next.badge">おすすめ</div>
                    </div>
                    <h4 data-i18n="next.exe.title">exe.dev + Shelley</h4>
                    <p data-i18n="next.exe.desc">VM上のShelleyに spec.json を貼り付けるだけ。環境構築からデプロイまで一気に実行。</p>
                    <code data-i18n="next.exe.code">spec.json を貼って「これを実装して」</code>
                  </a>
                  <a href="https://docs.anthropic.com/en/docs/claude-code" target="_blank" rel="noopener" class="next-step-card">
                    <div class="next-step-header">
                      <div class="next-step-icon">C</div>
                    </div>
                    <h4 data-i18n="next.claude.title">Claude Code</h4>
                    <p data-i18n="next.claude.desc">ローカル環境で PRD.md をリポジトリに置いて、Claude Code で実装を開始。</p>
                    <code data-i18n="next.claude.code">PRD.md をリポジトリルートに配置</code>
                  </a>
                  <a href="https://cursor.com" target="_blank" rel="noopener" class="next-step-card">
                    <div class="next-step-header">
                      <div class="next-step-icon">Cu</div>
                    </div>
                    <h4 data-i18n="next.cursor.title">Cursor</h4>
                    <p data-i18n="next.cursor.desc">Cursor のチャットに spec.json を貼り付けて、対話しながら実装。</p>
                    <code data-i18n="next.cursor.code">spec.json を Composer に貼り付け</code>
                  </a>
                  <div class="next-step-card generic">
                    <div class="next-step-header">
                      <div class="next-step-icon">&gt;_</div>
                    </div>
                    <h4 data-i18n="next.other.title">その他のエージェント</h4>
                    <p data-i18n="next.other.desc">GitHub Copilot, Devin, Cline, Windsurf など、任意のコーディングエージェントで利用可能。</p>
                    <code data-i18n="next.other.code">spec.json は標準JSON形式</code>
                  </div>
                </div>
              </div>
              </details>
            </div>

            <!-- Step: Deploy -->
            <div id="step-deploy" class="step-content">
              <div class="step-header">
                <h2 data-i18n="deploy.title">デプロイ & フィードバック</h2>
                <p class="step-desc" data-i18n="deploy.desc">生成されたアプリを公開し、ユーザーフィードバックを収集して次の改善に回す</p>
              </div>

              <div id="deploy-container">
                <div id="deploy-empty" class="empty-state">
                  <p data-i18n="deploy.empty">まだデプロイがありません。実装仕様からアプリを生成してください。</p>
                  <button class="btn btn-accent" onclick="generateAndDeploy()" data-i18n="deploy.generate">アプリを生成</button>
                </div>
                <div id="deploy-list" style="display:none"></div>
                <div id="deploy-preview" style="display:none">
                  <div class="deploy-preview-header">
                    <h3 data-i18n="deploy.preview">プレビュー</h3>
                    <div class="deploy-actions">
                      <a id="deploy-link" href="#" target="_blank" class="btn btn-primary btn-sm">
                        <span data-i18n="deploy.open">アプリを開く</span>
                      </a>
                      <button class="btn btn-sm btn-secondary" onclick="copyDeployUrl()" data-i18n="deploy.copyUrl">URLをコピー</button>
                    </div>
                  </div>
                  <iframe id="deploy-iframe" style="width:100%;height:500px;border:1px solid var(--border);border-radius:8px"></iframe>
                </div>
              </div>

              <!-- Feedback Summary -->
              <div id="feedback-section" style="display:none;margin-top:24px">
                <h3 data-i18n="deploy.feedbackTitle">ユーザーフィードバック</h3>
                <div id="feedback-stats" class="feedback-stats"></div>
                <div id="feedback-list" class="feedback-list"></div>
                <div class="step-actions" style="margin-top:16px">
                  <button class="btn btn-accent" onclick="regenerateWithFeedback()">
                    <span data-i18n="deploy.regenerate">フィードバックを反映して再生成</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- ========== SHARED INTERVIEW (respondent) ========== -->
      <section id="page-shared" class="page">
        <div class="shared-layout">
          <!-- Welcome screen -->
          <div id="shared-welcome" class="shared-screen active">
            <div class="shared-card">
              <div class="shared-logo">
                <svg width="36" height="36" viewBox="0 0 28 28" fill="none">
                  <rect width="28" height="28" rx="6" fill="#81a2be"/>
                  <path d="M8 9h5l3 5-3 5H8l3-5-3-5z" fill="#fff" opacity="0.9"/>
                  <path d="M15 9h5l-3 5 3 5h-5l-3-5 3-5z" fill="#fff" opacity="0.6"/>
                </svg>
                DeepForm
              </div>
              <h1 id="shared-theme-title"></h1>
              <p class="shared-desc" data-i18n="shared.desc">このテーマについて、AIがあなたにいくつか質問します。<br>日頃感じていることを率直に教えてください。</p>
              <p class="shared-time" data-i18n="shared.time">所要時間：約5分</p>
              <div class="shared-name-input">
                <label data-i18n="shared.nameLabel">お名前（任意）</label>
                <input type="text" id="shared-name" data-i18n="shared.namePlaceholder" placeholder="例：田中太郎">
              </div>
              <button class="btn btn-primary btn-lg" onclick="campaignToken ? startCampaignInterview() : startSharedInterview()" id="btn-shared-start">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                <span data-i18n="shared.start">インタビューを始める</span>
              </button>
            </div>
          </div>

          <!-- Chat screen -->
          <div id="shared-chat" class="shared-screen">
            <div class="shared-chat-header">
              <span class="shared-chat-theme" id="shared-chat-theme"></span>
              <div class="shared-progress">
                <div class="shared-progress-bar" id="shared-progress-bar"></div>
              </div>
            </div>
            <div class="chat-container" id="shared-chat-container"></div>
            <div class="chat-input-area">
              <textarea id="shared-chat-input" data-i18n="interview.placeholder" placeholder="回答を入力…" rows="2"
                onkeydown="handleSharedKeydown(event)"></textarea>
              <button class="btn btn-primary" onclick="campaignToken ? sendCampaignMessage() : sendSharedMessage()" id="btn-shared-send">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
              </button>
            </div>
            <div class="chat-hint" data-i18n="interview.hint">Shift + Enter で送信　・　Enter で改行</div>
            <div class="step-actions" id="shared-complete-actions" style="display:none">
              <button class="btn btn-accent btn-lg" onclick="campaignToken ? completeCampaignInterview() : completeSharedInterview()">
                <span data-i18n="shared.complete">インタビューを完了する →</span>
              </button>
            </div>
          </div>

          <!-- Facts review screen -->
          <div id="shared-facts" class="shared-screen">
            <div class="shared-card" style="max-width:800px">
              <h2 data-i18n="shared.factsTitle">抽出されたファクト</h2>
              <p class="shared-desc" data-i18n="shared.factsDesc">あなたの回答から以下のファクトが抽出されました。<br>修正や補足があればフィードバック欄に記入してください。</p>
              <div id="shared-facts-container" class="cards-grid"></div>
              <div class="shared-feedback-area">
                <label data-i18n="shared.feedbackLabel">フィードバック（任意）</label>
                <textarea id="shared-feedback" data-i18n="shared.feedbackPlaceholder" placeholder="抽出内容への修正や追加コメントがあれば…" rows="3"></textarea>
              </div>
              <button class="btn btn-primary btn-lg" onclick="campaignToken ? submitCampaignFeedback() : submitSharedFeedback()" style="width:100%">
                <span data-i18n="shared.submit">送信して完了</span>
              </button>
            </div>
          </div>

          <!-- Thank you screen -->
          <div id="shared-thanks" class="shared-screen">
            <div class="shared-card" style="text-align:center">
              
              <h1 data-i18n="shared.thanksTitle">ありがとうございました！</h1>
              <p class="shared-desc" data-i18n="shared.thanksDesc">あなたのフィードバックは開発チームに届けられます。<br>貴重なご意見をありがとうございました。</p>
              <div class="shared-thanks-footer">
                <span>Powered by</span>
                <strong>DeepForm</strong>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Loading overlay -->
  <div id="loading-overlay" class="loading-overlay hidden">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <p id="loading-text">AIが分析中…</p>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <script src="/i18n.js"></script>
  <script src="/app.js"></script>
</body>
</html>
